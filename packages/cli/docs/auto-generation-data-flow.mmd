%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#4F46E5'}}}%%

flowchart LR
    subgraph INPUT["üì• SDK Source"]
        direction TB
        TS_CODE["TypeScript Service Classes<br/>‚Ä¢ Method signatures<br/>‚Ä¢ Parameter types<br/>‚Ä¢ JSDoc comments<br/>‚Ä¢ Return types"]
    end

    subgraph PARSE["üîç AST Parsing"]
        direction TB
        AST["ts-morph extracts:<br/>‚Ä¢ Class declarations<br/>‚Ä¢ Method declarations<br/>‚Ä¢ Parameters & types<br/>‚Ä¢ Documentation"]
    end

    subgraph INTERMEDIATE["üìã ServiceInfo"]
        direction TB
        SERVICE_INFO["Structured metadata:<br/>‚Ä¢ Service name & category<br/>‚Ä¢ Method definitions<br/>‚Ä¢ Parameter details<br/>‚Ä¢ Type information"]
    end

    subgraph CLI_OUTPUT["‚å®Ô∏è CLI Commands"]
        direction TB
        CLI_CODE["oclif Command classes:<br/>‚Ä¢ Flag definitions<br/>‚Ä¢ run() method<br/>‚Ä¢ SDK client calls<br/>‚Ä¢ Output formatting"]
    end

    subgraph MCP_OUTPUT["ü§ñ MCP Tools"]
        direction TB
        MCP_CODE["MCP tool definitions:<br/>‚Ä¢ Zod input schemas<br/>‚Ä¢ Execute handlers<br/>‚Ä¢ SDK client calls<br/>‚Ä¢ JSON responses"]
    end

    INPUT --> PARSE
    PARSE --> INTERMEDIATE
    INTERMEDIATE --> CLI_OUTPUT
    INTERMEDIATE --> MCP_OUTPUT

    style INPUT fill:#E0E7FF,stroke:#4F46E5
    style PARSE fill:#DDD6FE,stroke:#7C3AED
    style INTERMEDIATE fill:#FEF3C7,stroke:#F59E0B
    style CLI_OUTPUT fill:#D1FAE5,stroke:#10B981
    style MCP_OUTPUT fill:#FFEDD5,stroke:#F97316
